---
import BaseLayout from '../layouts/BaseLayout.astro'
import BlogCard from '../components/BlogCard.astro'
import { client } from '../lib/sanity'

const posts = await client.fetch(`
  *[_type == 'blogPost'] | order(publishedAt desc) {
    title, slug, excerpt, publishedAt, tags[]->{name}
  }
`)

const pageTitle = 'Home'
const pageDescription = 'Welcome to my blog'
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <div class="space-y-8">
    <header>
      <h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4">
        Welcome to My Blog
      </h1>
      <p class="text-lg text-gray-700 dark:text-gray-300">
        Explore my latest thoughts and ideas
      </p>
    </header>

    {posts.length === 0 ? (
      <div class="text-center py-12">
        <p class="text-gray-600 dark:text-gray-400 text-lg">
          No posts yet. Check back soon!
        </p>
      </div>
    ) : (
      <div class="grid gap-6 md:grid-cols-1">
        {posts.map((post: any) => (
          <BlogCard
            title={post.title}
            slug={post.slug.current}
            excerpt={post.excerpt || ''}
            publishedAt={post.publishedAt}
            tags={post.tags?.map((tag: any) => tag.name) || []}
          />
        ))}
      </div>
    )}
  </div>
</BaseLayout>
