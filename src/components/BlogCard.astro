---
interface Props {
	title: string;
	slug: string;
	excerpt: string;
	publishedAt: string;
	tags?: string[];
}

const { title, slug, excerpt, publishedAt, tags = [] } = Astro.props;
const base = import.meta.env.BASE_URL;

function formatDate(date: string): string {
	const d = new Date(date);
	return d.toLocaleDateString('en-US', {
		year: 'numeric',
		month: 'long',
		day: 'numeric'
	});
}
---

<article class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow duration-200">
	<a href={`${base}/blog/${slug}`} class="block group">
		<h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
			{title}
		</h2>

		<time datetime={publishedAt} class="text-sm text-gray-500 dark:text-gray-400 mb-3 block">
			{formatDate(publishedAt)}
		</time>

		<p class="text-gray-700 dark:text-gray-300 mb-4 line-clamp-3">
			{excerpt}
		</p>

		{tags.length > 0 && (
			<div class="flex flex-wrap gap-2">
				{tags.map((tag) => (
					<span class="px-3 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full">
						{tag}
					</span>
				))}
			</div>
		)}
	</a>
</article>

<style>
	.line-clamp-3 {
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
</style>
